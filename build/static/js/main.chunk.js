(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{27:function(e,t,a){e.exports=a(46)},32:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),o=a(23),r=a.n(o),c=(a(32),a(3)),i=a(4),l=a(6),m=a(5),u=a(7),d=a(1),f=new(a(24).a)("Rankscore");f.version(1).stores({Score:"++id"});var p=f,h=a(11),v=a(14),b=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",null,"404 Not Found"),s.a.createElement(v.a,{to:"/"},"Go back to the front page..."))}}]),t}(n.Component),g=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"midt"},s.a.createElement("form",{onSubmit:this.props.LocationSubmit},s.a.createElement("p",null,"Location:"),s.a.createElement("input",{name:"location",type:"text"}),s.a.createElement("br",null),s.a.createElement("input",{value:"Add Location",type:"submit",className:"submit"})))}}]),t}(n.Component),y=a(8),E=Object(y.a)(),S=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){""===this.props.l&&E.push("/")}},{key:"render",value:function(){return s.a.createElement("div",{className:"midt"},s.a.createElement("h3",null,"Location: ",this.props.l),s.a.createElement("form",{onSubmit:this.props.NameSubmit},s.a.createElement("p",null,"Name:"),s.a.createElement("input",{name:"name",type:"text"}),s.a.createElement("br",null),s.a.createElement("input",{value:"Start",type:"submit",className:"submit"})))}}]),t}(n.Component),j=a(15),O=a.n(j),M=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).getStyleString=function(){var e=a.props.x.toFixed(0),t=a.props.y.toFixed(0),n="";return n=a.props.dx<0?"scale(-1, 1) ":"scale(1, 1) ",a.props.dy<0?n+=" rotate(-20deg) ":n+=" rotate(20deg) ",{left:e+"px",top:t+"px",transform:n}},a.clickEvent=function(){console.log("clicked"),a.props.removeCell(a.props.id)},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{style:this.getStyleString(),className:"spermcell",onClick:this.clickEvent},s.a.createElement("img",{src:"/assets/images/".concat(this.props.type,".gif"),alt:"",className:this.props.type}))}}]),t}(n.Component),x=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).getMovementVal=function(e,t){return(Math.random()*(e-t)+t).toFixed(2)*(1===Math.floor(2*Math.random())?1:-1)},a.removeCell=function(e){var t=a.state.cells.find(function(t){return t.id==e}),n=parseInt(t.score),s=t.type,o=a.state.currentScore+n;a.setState({currentScore:o});var r=a.state.cells.filter(function(t){return t.id!=e}),c=a.getNewCell(s);r.push(c),a.setState({cells:r})},a.getNewCell=function(e){var t=Object(d.a)(Object(d.a)(a)),n={id:O.a.v4(),x:Math.random()*(t.canvas.offsetWidth-(t.canvas.offsetWidth-t.canvas.offsetWidth))+(t.canvas.offsetWidth-t.canvas.offsetWidth),y:Math.random()*(t.canvas.offsetHeight-(t.canvas.offsetHeight-t.canvas.offsetHeight))+(t.canvas.offsetHeight-t.canvas.offsetHeight),dx:t.getMovementVal(t.state.settings.maxMoveX,t.state.settings.minMoveX),dy:t.getMovementVal(t.state.settings.maxMoveY,t.state.settings.minMoveY),type:e};return"good"==e?n.score=t.state.settings.goodBallScore:"bad"==e&&(n.score=t.state.settings.badBallScore),n},a.addCells=function(){for(var e=[],t=Object(d.a)(Object(d.a)(a)),n=0;n<a.state.settings.goodBalls;n++){var s={id:O.a.v4(),x:Math.random()*(t.canvas.offsetWidth-(t.canvas.offsetWidth-t.canvas.offsetWidth))+(t.canvas.offsetWidth-t.canvas.offsetWidth),y:Math.random()*(t.canvas.offsetHeight-(t.canvas.offsetHeight-t.canvas.offsetHeight))+(t.canvas.offsetHeight-t.canvas.offsetHeight),dx:a.getMovementVal(a.state.settings.maxMoveX,a.state.settings.minMoveX),dy:a.getMovementVal(a.state.settings.maxMoveY,a.state.settings.minMoveY),type:"good",score:t.state.settings.goodBallScore};e.push(s)}for(var o=0;o<a.state.settings.badBalls;o++){var r={id:O.a.v4(),x:Math.random()*(t.canvas.offsetWidth-(t.canvas.offsetWidth-t.canvas.offsetWidth))+(t.canvas.offsetWidth-t.canvas.offsetWidth),y:Math.random()*(t.canvas.offsetHeight-(t.canvas.offsetHeight-t.canvas.offsetHeight))+(t.canvas.offsetHeight-t.canvas.offsetHeight),dx:a.getMovementVal(a.state.settings.maxMoveX,a.state.settings.minMoveX),dy:a.getMovementVal(a.state.settings.maxMoveY,a.state.settings.minMoveY),type:"bad",score:t.state.settings.badBallScore};e.push(r)}a.setState({cells:e})},a.endGame=function(){Object(d.a)(Object(d.a)(a));a.setState({cells:[]})},a.run=function(){Object(d.a)(Object(d.a)(a));return a.gameTick(),a.startTimer(),setTimeout(function(){},1e3*a.state.settings.time),!0},a.moveCells=function(){for(var e=a.state.cells,t=a.canvas,n=[],s=0;s<e.length;s++){var o=e[s],r=o.x,c=o.y,i=o.dx,l=o.dy;r<0?o.dx=Math.abs(i):r>t.offsetWidth&&(o.dx=-Math.abs(i)),c<0?o.dy=Math.abs(l):c>t.offsetHeight&&(o.dy=-Math.abs(l)),o.x+=o.dx,o.y+=o.dy,n.push(o)}a.setState({cells:n})},a.gameTick=function(){var e=Object(d.a)(Object(d.a)(a));setInterval(function(){e.state.timeLeft>0?e.moveCells():clearInterval(this)},1e3/e.state.settings.framePerSecond)},a.startTimer=function(){var e=Object(d.a)(Object(d.a)(a));a.setState({timeLeft:a.state.settings.time}),a.timerInterval=setInterval(function(){if(e.state.timeLeft>1)e.setState({timeLeft:e.state.timeLeft-=1});else{e.setState({timeLeft:"Slut"}),clearInterval(a.timerInterval),e.endGame();var t={Name:a.props.name,Location:a.props.location,Score:a.state.currentScore};p.table("Score").add(t),a.props.data(),E.push("/Rank/".concat(a.props.name,"/").concat(a.state.currentScore,"/").concat(a.props.location))}},1e3)},a.state={settings:{maxMoveX:5,maxMoveY:5,minMoveX:1.5,minMoveY:1.5,framePerSecond:30,goodBalls:20,badBalls:7,goodBallScore:2,badBallScore:-5,time:30},currentScore:0,timeLeft:0,canvas:"",balls:[],runInterval:{},cells:[],name:"",location:""},a}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){""===this.props.location&&E.push("/"),this.setState({canvas:document.getElementById("gameboard")}),this.setState({name:this.props.name,location:this.props.location}),this.addCells(),this.run()}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{class:"score_et"},s.a.createElement("p",null,s.a.createElement("div",{id:"timer"},s.a.createElement("strong",null,"Time:")," ",this.state.timeLeft))),s.a.createElement("div",{class:"score_to"},s.a.createElement("p",null,s.a.createElement("strong",null,"Score:")," ",this.state.currentScore)),s.a.createElement("div",{ref:function(t){return e.canvas=t},id:"gameboard",style:{height:"500px"}},this.state.cells.map(function(t){return s.a.createElement(M,{id:t.id,x:t.x,y:t.y,dx:t.dx,dy:t.dy,type:t.type,score:t.score,removeCell:e.removeCell})})),s.a.createElement("div",{id:"score-1",style:{display:"none"}}),s.a.createElement("div",{id:"score-2",style:{display:"none"}}),s.a.createElement("div",{id:"score-3",style:{display:"none"}}))}}]),t}(n.Component),k=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){for(var e=[],t=this.props.scores.sort(function(e,t){return t.Score-e.Score}),a=0;a<this.props.scores.length;a++)e.push(s.a.createElement("li",null,s.a.createElement("h2",null,a+1),s.a.createElement("p",null,"Name: ",t[a].Name),s.a.createElement("p",null,"Score: ",t[a].Score),s.a.createElement("p",null,"Location: ",t[a].Location)));var n="",o="";return this.props.score>50?(n="awesome",o="a designer baby"):this.props.score>25?(n="medium",o="an okay baby"):(n="bad",o="a retarded baby"),s.a.createElement("div",{className:"rank"},s.a.createElement("div",{className:"score_y"},s.a.createElement("h3",null,"Congrats you got ",o),s.a.createElement("img",{src:"/assets/images/"+n+".png"})),s.a.createElement("div",{id:"y_score"},s.a.createElement("h3",null,"Your score"),s.a.createElement("p",null,"Name: ",this.props.name),s.a.createElement("p",null,"Location: ",this.props.location),s.a.createElement("p",null,"Score: ",this.props.score)),s.a.createElement(v.a,{to:"/Name"},s.a.createElement("button",{type:"button",className:"btn"},"Try again")),s.a.createElement("ul",null,e))}}]),t}(n.Component),N=function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).API_URL="https://spermbank.herokuapp.com/api/",e.state={Allscores:[],score:4,sted:"",name:"",online:!1},e.LocationSubmit=e.LocationSubmit.bind(Object(d.a)(Object(d.a)(e))),e.NameSubmit=e.NameSubmit.bind(Object(d.a)(Object(d.a)(e))),e.renderdata=e.renderdata.bind(Object(d.a)(Object(d.a)(e))),e.getData=e.getData.bind(Object(d.a)(Object(d.a)(e))),e}return Object(u.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.renderdata(),this.interval=setInterval(function(){return e.renderdata()},5e3),this.getData(),this.audioplayer.play()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"getData",value:function(){var e=this;navigator.onLine?fetch("".concat(this.API_URL,"all")).then(function(e){return e.json()}).then(function(t){e.setState({Allscores:t})}).catch(function(e){console.error("Error when fetching: ",e)}):p.table("Score").toArray().then(function(t){e.setState({Allscores:t})})}},{key:"LocationSubmit",value:function(e){e.preventDefault();var t=e.target.location.value;this.setState({sted:t}),E.push("/Name")}},{key:"NameSubmit",value:function(e){e.preventDefault();var t=e.target.name.value;this.setState({name:t}),E.push("/Game")}},{key:"renderdata",value:function(){var e=this;navigator.onLine?(this.setState({online:!0}),p.table("Score").toArray().then(function(t){if(t.length>0){for(var a=0;a<t.length;a++){var n=t[a].Name,s=t[a].Location,o=t[a].Score;fetch("".concat(e.API_URL,"add"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({Name:n,Location:s,Score:o})}).catch(function(e){return console.log(e)})}p.table("Score").clear()}e.getData()}).catch(function(e){return console.log(e)})):this.setState({online:!1})}},{key:"render",value:function(){var e=this;return s.a.createElement(h.b,{history:E},s.a.createElement("div",{className:this.state.online?"container border_green":"container border_red"},s.a.createElement("div",null,s.a.createElement("audio",{ref:function(t){return e.audioplayer=t},src:"/assets/images/music.mp3",autoPlay:!0,loop:!0})),s.a.createElement(h.c,null,s.a.createElement(h.a,{exact:!0,path:"/",render:function(t){return s.a.createElement(g,Object.assign({},t,{LocationSubmit:e.LocationSubmit}))}}),s.a.createElement(h.a,{exact:!0,path:"/Name",render:function(t){return s.a.createElement(S,Object.assign({},t,{l:e.state.sted,NameSubmit:e.NameSubmit}))}}),s.a.createElement(h.a,{exact:!0,path:"/Game",render:function(t){return s.a.createElement(x,Object.assign({},t,{location:e.state.sted,name:e.state.name,score:e.state.score,data:e.getData}))}}),s.a.createElement(h.a,{exact:!0,path:"/Rank/:name/:score/:location",render:function(t){return s.a.createElement(k,Object.assign({},t,{score:t.match.params.score,name:t.match.params.name,location:t.match.params.location,scores:e.state.Allscores,renderdata:e.renderdata}))}}),s.a.createElement(h.a,{component:b}))))}}]),t}(n.Component);r.a.render(s.a.createElement(N,null),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.0a9e9084.chunk.js.map